!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app-compat"),require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app-compat","@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase,e.firebase.INTERNAL.modularAPIs)}(this,function(qt,Lt){"use strict";try{!function(){function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=e(qt),i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function n(){return new Promise(function(e,t){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=function(){o.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},o.onupgradeneeded=function(){n=!1},o.onerror=function(){var e;t((null===(e=o.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}var o,a="FirebaseError",r=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(s,o=Error),s);function s(e,t,n){t=o.call(this,t)||this;return t.code=e,t.customData=n,t.name=a,Object.setPrototypeOf(t,s.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,c.prototype.create),t}var c=(u.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i,o=t[0]||{},a=this.service+"/"+e,e=this.errors[e],e=e?(i=o,e.replace(p,function(e,t){var n=i[t];return null!=n?String(n):"<"+t+"?>"})):"Error",e=this.serviceName+": "+e+" ("+a+").";return new r(a,e,o)},u);function u(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var p=/\{\$([^}]+)}/g;function d(e){return e&&e._delegate?e._delegate:e}var l=(f.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},f.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},f.prototype.setServiceProps=function(e){return this.serviceProps=e,this},f.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},f);function f(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}function g(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function h(n,i,o){var a,e=new Promise(function(e,t){g(a=n[i].apply(n,o)).then(e,t)});return e.request=a,e}function w(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function y(t,n,i,e){e.forEach(function(e){e in i.prototype&&(t.prototype[e]=function(){return h(this[n],e,arguments)})})}function m(t,n,i,e){e.forEach(function(e){e in i.prototype&&(t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)})})}function b(e,i,t,n){n.forEach(function(n){n in t.prototype&&(e.prototype[n]=function(){return e=this[i],(t=h(e,n,arguments)).then(function(e){if(e)return new k(e,t.request)});var e,t})})}function v(e){this._index=e}function k(e,t){this._cursor=e,this._request=t}function I(e){this._store=e}function S(n){this._tx=n,this.complete=new Promise(function(e,t){n.oncomplete=function(){e()},n.onerror=function(){t(n.error)},n.onabort=function(){t(n.error)}})}function _(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new S(n)}function T(e){this._db=e}function C(e,t,n){var t=h(indexedDB,"open",[e,t]),i=t.request;return i&&(i.onupgradeneeded=function(e){n&&n(new _(i.result,e.oldVersion,i.transaction))}),t.then(function(e){return new T(e)})}function D(e){return h(indexedDB,"deleteDatabase",[e])}w(v,"_index",["name","keyPath","multiEntry","unique"]),y(v,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),b(v,"_index",IDBIndex,["openCursor","openKeyCursor"]),w(k,"_cursor",["direction","key","primaryKey","value"]),y(k,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(k.prototype[n]=function(){var t=this,e=arguments;return Promise.resolve().then(function(){return t._cursor[n].apply(t._cursor,e),g(t._request).then(function(e){if(e)return new k(e,t._request)})})})}),I.prototype.createIndex=function(){return new v(this._store.createIndex.apply(this._store,arguments))},I.prototype.index=function(){return new v(this._store.index.apply(this._store,arguments))},w(I,"_store",["name","keyPath","indexNames","autoIncrement"]),y(I,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),b(I,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),m(I,"_store",IDBObjectStore,["deleteIndex"]),S.prototype.objectStore=function(){return new I(this._tx.objectStore.apply(this._tx,arguments))},w(S,"_tx",["objectStoreNames","mode"]),m(S,"_tx",IDBTransaction,["abort"]),_.prototype.createObjectStore=function(){return new I(this._db.createObjectStore.apply(this._db,arguments))},w(_,"_db",["name","version","objectStoreNames"]),m(_,"_db",IDBDatabase,["deleteObjectStore","close"]),T.prototype.transaction=function(){return new S(this._db.transaction.apply(this._db,arguments))},w(T,"_db",["name","version","objectStoreNames"]),m(T,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(o){[I,v].forEach(function(e){o in e.prototype&&(e.prototype[o.replace("open","iterate")]=function(){var e=(n=arguments,Array.prototype.slice.call(n)),t=e[e.length-1],n=this._store||this._index,i=n[o].apply(n,e.slice(0,-1));i.onsuccess=function(){t(i.result)}})})}),[v,I].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,n){var i=this,o=[];return new Promise(function(t){i.iterateCursor(e,function(e){e?(o.push(e.value),void 0===n||o.length!=n?e.continue():t(o)):t(o)})})})});var O="0.5.0-2021720181311";const j=1e4,P=`w:${O}`,A="FIS_v2",E="https://firebaseinstallations.googleapis.com/v1",K=36e5;var M,x,N;const B=new c("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $(e){return e instanceof r&&e.code.includes("request-failed")}function F({projectId:e}){return`${E}/projects/${e}/installations`}function q(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}async function L(e,t){t=(await t.json()).error;return B.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function R({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function V(e,{refreshToken:t}){const n=R(e);return n.append("Authorization",(t=t,`${A} ${t}`)),n}async function H(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function U(t){return new Promise(e=>{setTimeout(e,t)})}const W=/^[cdef][\w-]{21}$/,G="";function J(){try{const t=new Uint8Array(17),n=self.crypto||self.msCrypto;n.getRandomValues(t),t[0]=112+t[0]%16;var e=function(e){const t=function(e){const t=btoa(String.fromCharCode(...e));return t.replace(/\+/g,"-").replace(/\//g,"_")}(e);return t.substr(0,22)}(t);return W.test(e)?e:G}catch(e){return G}}function z(e){return`${e.appName}!${e.appId}`}const Y=new Map;function Q(e,t){e=z(e);Z(e,t),function(e,t){const n=function(){!X&&"BroadcastChannel"in self&&(X=new BroadcastChannel("[Firebase] FID Change"),X.onmessage=e=>{Z(e.data.key,e.data.fid)});return X}();n&&n.postMessage({key:e,fid:t});0===Y.size&&X&&(X.close(),X=null)}(e,t)}function Z(e,t){e=Y.get(e);if(e)for(const n of e)n(t)}let X=null;const ee="firebase-installations-database",te=1,ne="firebase-installations-store";let ie=null;function oe(){return ie=ie||C(ee,te,e=>{0===e.oldVersion&&e.createObjectStore(ne)}),ie}async function ae(e,t){var n=z(e);const i=await oe(),o=i.transaction(ne,"readwrite"),a=o.objectStore(ne);var r=await a.get(n);return await a.put(t,n),await o.complete,r&&r.fid===t.fid||Q(e,t.fid),t}async function re(e){e=z(e);const t=await oe(),n=t.transaction(ne,"readwrite");await n.objectStore(ne).delete(e),await n.complete}async function se(e,t){var n=z(e);const i=await oe(),o=i.transaction(ne,"readwrite"),a=o.objectStore(ne);var r=await a.get(n),t=t(r);return void 0===t?await a.delete(n):await a.put(t,n),await o.complete,!t||r&&r.fid===t.fid||Q(e,t.fid),t}async function ce(t){let n;var e=await se(t,e=>{e=function(e){e=e||{fid:J(),registrationStatus:0};return pe(e)}(e),e=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:async function(e){let t=await ue(e);for(;1===t.registrationStatus;)await U(100),t=await ue(e);if(0!==t.registrationStatus)return t;{var{installationEntry:n,registrationPromise:i}=await ce(e);return i||n}}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(B.create("app-offline"));return{installationEntry:t,registrationPromise:n}}t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},e=async function(t,n){try{var e=await async function(e,{fid:t}){const n=F(e);var i=R(e),e={fid:t,authVersion:A,appId:e.appId,sdkVersion:P};const o={method:"POST",headers:i,body:JSON.stringify(e)},a=await H(()=>fetch(n,o));if(a.ok){e=await a.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:q(e.authToken)}}throw await L("Create Installation",a)}(t,n);return ae(t,e)}catch(e){throw $(e)&&409===e.customData.serverCode?await re(t):await ae(t,{fid:n.fid,registrationStatus:0}),e}}(e,t);return{installationEntry:t,registrationPromise:e}}}(t,e);return n=e.registrationPromise,e.installationEntry});return e.fid===G?{installationEntry:await n}:{installationEntry:e,registrationPromise:n}}function ue(e){return se(e,e=>{if(!e)throw B.create("installation-not-found");return pe(e)})}function pe(e){return 1===(t=e).registrationStatus&&t.registrationTime+j<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function de({appConfig:e,platformLoggerProvider:t},n){const i=([o,{fid:a}]=[e,n],`${F(o)}/${a}/authTokens:generate`);var o,a;const r=V(e,n),s=t.getImmediate({optional:!0});s&&r.append("x-firebase-client",s.getPlatformInfoString());t={installation:{sdkVersion:P}};const c={method:"POST",headers:r,body:JSON.stringify(t)},u=await H(()=>fetch(i,c));if(u.ok)return q(await u.json());throw await L("Generate Auth Token",u)}async function le(i,o=!1){let a;var e=await se(i.appConfig,e=>{if(!ge(e))throw B.create("not-registered");var t,n=e.authToken;if(o||2!==(t=n).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+K}(t)){if(1===n.requestStatus)return a=async function(e,t){let n=await fe(e.appConfig);for(;1===n.authToken.requestStatus;)await U(100),n=await fe(e.appConfig);var i=n.authToken;return 0===i.requestStatus?le(e,t):i}(i,o),e;if(!navigator.onLine)throw B.create("app-offline");n=(t=e,n={requestStatus:1,requestTime:Date.now()},Object.assign(Object.assign({},t),{authToken:n}));return a=async function(t,n){try{var e=await de(t,n),i=Object.assign(Object.assign({},n),{authToken:e});return await ae(t.appConfig,i),e}catch(e){throw!$(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(n=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),await ae(t.appConfig,n)):await re(t.appConfig),e}}(i,n),n}return e});return a?await a:e.authToken}function fe(e){return se(e,e=>{if(!ge(e))throw B.create("not-registered");var t=e.authToken;return 1===(t=t).requestStatus&&t.requestTime+j<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ge(e){return void 0!==e&&2===e.registrationStatus}async function he(e,t=!1){return await async function(e){var{registrationPromise:e}=await ce(e);e&&await e}(e.appConfig),(await le(e,t)).token}function we(e){return B.create("missing-app-config-values",{valueName:e})}const ye="installations";Lt._registerComponent(new l(ye,e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:function(e){if(!e||!e.options)throw we("App Configuration");if(!e.name)throw we("App Name");for(const t of["projectId","apiKey","appId"])if(!e.options[t])throw we(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),platformLoggerProvider:Lt._getProvider(e,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),Lt._registerComponent(new l("installations-internal",e=>{e=e.getProvider("app").getImmediate();const t=Lt._getProvider(e,ye).getImmediate();return{getId:()=>async function(e){const{installationEntry:t,registrationPromise:n}=await ce(e.appConfig);return(n||le(e)).catch(console.error),t.fid}(t),getToken:e=>he(t,e)}},"PRIVATE")),Lt.registerVersion("@firebase/installations",O);const me=new c("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});const be="/firebase-messaging-sw.js",ve="/firebase-cloud-messaging-push-scope",ke="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ie="https://fcmregistrations.googleapis.com/v1",Se="google.c.a.c_id",_e="google.c.a.c_l",Te="google.c.a.ts";function Ce(e){e=new Uint8Array(e);const t=btoa(String.fromCharCode(...e));return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(O={})[O.DATA_MESSAGE=1]="DATA_MESSAGE",O[O.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",(O=M=M||{}).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked";const De="fcm_token_details_db",Oe=5,je="fcm_token_object_Store";async function Pe(a){if("databases"in indexedDB){const t=await indexedDB.databases(),n=t.map(e=>e.name);if(!n.includes(De))return null}let r=null;const e=await C(De,Oe,async e=>{var t;if(!(e.oldVersion<2)&&e.objectStoreNames.contains(je)){const o=e.transaction.objectStore(je);var n,i=await o.index("fcmSenderId").get(a);await o.clear(),i&&(2===e.oldVersion?(n=i).auth&&n.p256dh&&n.endpoint&&(r={token:n.fcmToken,createTime:null!==(t=n.createTime)&&void 0!==t?t:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:Ce(n.vapidKey)}}):3===e.oldVersion?(n=i,r={token:n.fcmToken,createTime:n.createTime,subscriptionOptions:{auth:Ce(n.auth),p256dh:Ce(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:Ce(n.vapidKey)}}):4===e.oldVersion&&(i=i,r={token:i.fcmToken,createTime:i.createTime,subscriptionOptions:{auth:Ce(i.auth),p256dh:Ce(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:Ce(i.vapidKey)}}))}});return e.close(),await D(De),await D("fcm_vapid_details_db"),await D("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;var{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(r)?r:null}const Ae="firebase-messaging-database",Ee=1,Ke="firebase-messaging-store";let Me=null;function xe(){return Me=Me||C(Ae,Ee,e=>{0===e.oldVersion&&e.createObjectStore(Ke)}),Me}async function Ne(e){var t=$e(e);const n=await xe();t=await n.transaction(Ke).objectStore(Ke).get(t);if(t)return t;t=await Pe(e.appConfig.senderId);return t?(await Be(e,t),t):void 0}async function Be(e,t){e=$e(e);const n=await xe(),i=n.transaction(Ke,"readwrite");return await i.objectStore(Ke).put(t,e),await i.complete,t}function $e({appConfig:e}){return e.appId}async function Fe(e,t){var n={method:"DELETE",headers:await Le(e)};try{const a=await fetch(`${qe(e.appConfig)}/${t}`,n);var i=await a.json();if(i.error){var o=i.error.message;throw me.create("token-unsubscribe-failed",{errorInfo:o})}}catch(e){throw me.create("token-unsubscribe-failed",{errorInfo:e})}}function qe({projectId:e}){return`${Ie}/projects/${e}/registrations`}async function Le({appConfig:e,installations:t}){t=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Re({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const o={web:{endpoint:n,auth:t,p256dh:e}};return i!==ke&&(o.web.applicationPubKey=i),o}const Ve=6048e5;async function He(e){const t=await async function(e,t){var n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}(t)})}(e.swRegistration,e.vapidKey);var n,i,o,a,r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Ce(t.getKey("auth")),p256dh:Ce(t.getKey("p256dh"))},s=await Ne(e.firebaseDependencies);if(s){if(n=s.subscriptionOptions,i=r.vapidKey===n.vapidKey,o=r.endpoint===n.endpoint,a=r.auth===n.auth,n=r.p256dh===n.p256dh,i&&o&&a&&n)return Date.now()>=s.createTime+Ve?async function(t,e){try{var n=await async function(e,t){var n=await Le(e),i=Re(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(i)};let o;try{const a=await fetch(`${qe(e.appConfig)}/${t.token}`,i);o=await a.json()}catch(e){throw me.create("token-update-failed",{errorInfo:e})}if(o.error){i=o.error.message;throw me.create("token-update-failed",{errorInfo:i})}if(!o.token)throw me.create("token-update-no-token");return o.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Be(t.firebaseDependencies,i),n}catch(e){throw await Ue(t),e}}(e,{token:s.token,createTime:Date.now(),subscriptionOptions:r}):s.token;try{await Fe(e.firebaseDependencies,s.token)}catch(e){console.warn(e)}return We(e.firebaseDependencies,r)}return We(e.firebaseDependencies,r)}async function Ue(e){var t=await Ne(e.firebaseDependencies);t&&(await Fe(e.firebaseDependencies,t.token),await async function(e){e=$e(e);const t=await xe(),n=t.transaction(Ke,"readwrite");await n.objectStore(Ke).delete(e),await n.complete}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function We(e,t){t={token:await async function(e,t){var n=await Le(e),t=Re(t),t={method:"POST",headers:n,body:JSON.stringify(t)};let i;try{const o=await fetch(qe(e.appConfig),t);i=await o.json()}catch(e){throw me.create("token-subscribe-failed",{errorInfo:e})}if(i.error){t=i.error.message;throw me.create("token-subscribe-failed",{errorInfo:t})}if(!i.token)throw me.create("token-subscribe-no-token");return i.token}(e,t),createTime:Date.now(),subscriptionOptions:t};return await Be(e,t),t.token}function Ge(e){var t,n,i,o={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return n=o,(i=e).notification&&(n.notification={},(t=i.notification.title)&&(n.notification.title=t),(t=i.notification.body)&&(n.notification.body=t),(i=i.notification.image)&&(n.notification.image=i)),n=o,(i=e).data&&(n.data=i.data),n=o,(i=e).fcmOptions&&(n.fcmOptions={},(e=i.fcmOptions.link)&&(n.fcmOptions.link=e),(i=i.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=i)),o}function Je(t,n){const i=[];for(let e=0;e<t.length;e++)i.push(t.charAt(e)),e<n.length&&i.push(n.charAt(e));return i.join("")}function ze(e){return me.create("missing-app-config-values",{valueName:e})}Je("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Je("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ye{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw ze("App Configuration Object");if(!e.name)throw ze("App Name");var{options:t}=e;for(const n of["projectId","apiKey","appId","messagingSenderId"])if(!t[n])throw ze(n);return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Qe(e,t,n){t=function(e){switch(e){case M.NOTIFICATION_CLICKED:return"notification_open";case M.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);const i=await e.firebaseDependencies.analyticsProvider.get();i.logEvent(t,{message_id:n[Se],message_name:n[_e],message_time:n[Te],message_device_time:Math.floor(Date.now()/1e3)})}async function Ze(e,t){var n,i=t.data;i.isFirebaseMessaging&&(e.onMessageHandler&&i.messageType===M.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(Ge(i)):e.onMessageHandler.next(Ge(i))),n=i.data,"object"==typeof(t=n)&&t&&Se in t&&"1"===n["google.c.a.e"]&&await Qe(e,i.messageType,n))}async function Xe(e){try{e.swRegistration=await navigator.serviceWorker.register(be,{scope:ve}),e.swRegistration.update().catch(()=>{})}catch(e){throw me.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}async function et(e,t){if(!navigator)throw me.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw me.create("permission-blocked");var n,i;return n=e,await((i=null==t?void 0:t.vapidKey)?n.vapidKey=i:n.vapidKey||(n.vapidKey=ke)),await async function(e,t){if(t||e.swRegistration||await Xe(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw me.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),He(e)}function tt(e){return async function(e){if(!navigator)throw me.create("only-available-in-window");return e.swRegistration||await Xe(e),Ue(e)}(e=d(e))}function nt(e,t){return function(e,t){if(!navigator)throw me.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=d(e),t)}Lt._registerComponent(new l("messaging",e=>{!async function(){return await n()&&"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then(e=>{if(!e)throw me.create("unsupported-browser")}).catch(e=>{throw me.create("indexed-db-unsupported")});const t=new Ye(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>Ze(t,e)),t},"PUBLIC"));const it=new c("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});const ot="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",at="https://fcmregistrations.googleapis.com/v1",rt="FCM_MSG",st="google.c.a.c_id",ct=3,ut=1;function pt(e){e=new Uint8Array(e);const t=btoa(String.fromCharCode(...e));return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(O=x=x||{})[O.DATA_MESSAGE=1]="DATA_MESSAGE",O[O.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION",(O=N=N||{}).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked";const dt="fcm_token_details_db",lt=5,ft="fcm_token_object_Store";async function gt(a){if("databases"in indexedDB){const t=await indexedDB.databases(),n=t.map(e=>e.name);if(!n.includes(dt))return null}let r=null;const e=await C(dt,lt,async e=>{var t;if(!(e.oldVersion<2)&&e.objectStoreNames.contains(ft)){const o=e.transaction.objectStore(ft);var n,i=await o.index("fcmSenderId").get(a);await o.clear(),i&&(2===e.oldVersion?(n=i).auth&&n.p256dh&&n.endpoint&&(r={token:n.fcmToken,createTime:null!==(t=n.createTime)&&void 0!==t?t:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:pt(n.vapidKey)}}):3===e.oldVersion?(n=i,r={token:n.fcmToken,createTime:n.createTime,subscriptionOptions:{auth:pt(n.auth),p256dh:pt(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:pt(n.vapidKey)}}):4===e.oldVersion&&(i=i,r={token:i.fcmToken,createTime:i.createTime,subscriptionOptions:{auth:pt(i.auth),p256dh:pt(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:pt(i.vapidKey)}}))}});return e.close(),await D(dt),await D("fcm_vapid_details_db"),await D("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;var{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(r)?r:null}const ht="firebase-messaging-database",wt=1,yt="firebase-messaging-store";let mt=null;function bt(){return mt=mt||C(ht,wt,e=>{0===e.oldVersion&&e.createObjectStore(yt)}),mt}async function vt(e){var t=It(e);const n=await bt();t=await n.transaction(yt).objectStore(yt).get(t);if(t)return t;t=await gt(e.appConfig.senderId);return t?(await kt(e,t),t):void 0}async function kt(e,t){e=It(e);const n=await bt(),i=n.transaction(yt,"readwrite");return await i.objectStore(yt).put(t,e),await i.complete,t}function It({appConfig:e}){return e.appId}async function St(e,t){var n={method:"DELETE",headers:await Tt(e)};try{const a=await fetch(`${_t(e.appConfig)}/${t}`,n);var i=await a.json();if(i.error){var o=i.error.message;throw it.create("token-unsubscribe-failed",{errorInfo:o})}}catch(e){throw it.create("token-unsubscribe-failed",{errorInfo:e})}}function _t({projectId:e}){return`${at}/projects/${e}/registrations`}async function Tt({appConfig:e,installations:t}){t=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Ct({p256dh:e,auth:t,endpoint:n,vapidKey:i}){const o={web:{endpoint:n,auth:t,p256dh:e}};return i!==ot&&(o.web.applicationPubKey=i),o}const Dt=6048e5;async function Ot(e){const t=await async function(e,t){var n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(e){e=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}(t)})}(e.swRegistration,e.vapidKey);var n,i,o,a,r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:pt(t.getKey("auth")),p256dh:pt(t.getKey("p256dh"))},s=await vt(e.firebaseDependencies);if(s){if(n=s.subscriptionOptions,i=r.vapidKey===n.vapidKey,o=r.endpoint===n.endpoint,a=r.auth===n.auth,n=r.p256dh===n.p256dh,i&&o&&a&&n)return Date.now()>=s.createTime+Dt?async function(t,e){try{var n=await async function(e,t){var n=await Tt(e),i=Ct(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(i)};let o;try{const a=await fetch(`${_t(e.appConfig)}/${t.token}`,i);o=await a.json()}catch(e){throw it.create("token-update-failed",{errorInfo:e})}if(o.error){i=o.error.message;throw it.create("token-update-failed",{errorInfo:i})}if(!o.token)throw it.create("token-update-no-token");return o.token}(t.firebaseDependencies,e),i=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await kt(t.firebaseDependencies,i),n}catch(e){throw await jt(t),e}}(e,{token:s.token,createTime:Date.now(),subscriptionOptions:r}):s.token;try{await St(e.firebaseDependencies,s.token)}catch(e){console.warn(e)}return Pt(e.firebaseDependencies,r)}return Pt(e.firebaseDependencies,r)}async function jt(e){var t=await vt(e.firebaseDependencies);t&&(await St(e.firebaseDependencies,t.token),await async function(e){e=It(e);const t=await bt(),n=t.transaction(yt,"readwrite");await n.objectStore(yt).delete(e),await n.complete}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}async function Pt(e,t){t={token:await async function(e,t){var n=await Tt(e),t=Ct(t),t={method:"POST",headers:n,body:JSON.stringify(t)};let i;try{const o=await fetch(_t(e.appConfig),t);i=await o.json()}catch(e){throw it.create("token-subscribe-failed",{errorInfo:e})}if(i.error){t=i.error.message;throw it.create("token-subscribe-failed",{errorInfo:t})}if(!i.token)throw it.create("token-subscribe-no-token");return i.token}(e,t),createTime:Date.now(),subscriptionOptions:t};return await kt(e,t),t.token}Et("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Et("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");async function At(e,t){t=function(e,t){const n={};e.from&&(n.project_number=e.from);e.fcm_message_id&&(n.message_id=e.fcm_message_id);n.instance_id=t,e.notification?n.message_type=x.DISPLAY_NOTIFICATION.toString():n.message_type=x.DATA_MESSAGE.toString();n.sdk_platform=ct.toString(),n.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),e.collapse_key&&(n.collapse_key=e.collapse_key);n.event=ut.toString(),null!==(t=e.fcmOptions)&&void 0!==t&&t.analytics_label&&(n.analytics_label=null===(e=e.fcmOptions)||void 0===e?void 0:e.analytics_label);return n}(t,await e.firebaseDependencies.installations.getId());!function(e,t){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify(t),e.logEvents.push(n)}(e,t)}function Et(t,n){const i=[];for(let e=0;e<t.length;e++)i.push(t.charAt(e)),e<n.length&&i.push(n.charAt(e));return i.join("")}async function Kt(e,t){var n=function({data:e}){if(!e)return null;try{return e.json()}catch(e){return null}}(e);if(n){t.deliveryMetricsExportedToBigQueryEnabled&&await At(t,n);var i,o,a=await xt();if(a.some(e=>"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")))return function(e,t){t.isFirebaseMessaging=!0,t.messageType=N.PUSH_RECEIVED;for(const n of e)n.postMessage(t)}(a,n);n.notification&&await function(e){var{actions:t}=e,{maxActions:n}=Notification;t&&n&&t.length>n&&console.warn(`This browser only supports ${n} actions. The remaining actions will not be displayed.`);return self.registration.showNotification(null!==(n=e.title)&&void 0!==n?n:"",e)}(function(e){const t=Object.assign({},e.notification);return t.data={[rt]:e},t}(n)),t&&t.onBackgroundMessageHandler&&(o={from:(i=n).from,collapseKey:i.collapse_key,messageId:i.fcm_message_id},e=o,(a=i).notification&&(e.notification={},(n=a.notification.title)&&(e.notification.title=n),(n=a.notification.body)&&(e.notification.body=n),(a=a.notification.image)&&(e.notification.image=a)),e=o,(a=i).data&&(e.data=a.data),e=o,(a=i).fcmOptions&&(e.fcmOptions={},(i=a.fcmOptions.link)&&(e.fcmOptions.link=i),(a=a.fcmOptions.analytics_label)&&(e.fcmOptions.analyticsLabel=a)),o=o,"function"==typeof t.onBackgroundMessageHandler?t.onBackgroundMessageHandler(o):t.onBackgroundMessageHandler.next(o))}}async function Mt(e){const t=null===(o=null===(n=e.notification)||void 0===n?void 0:n.data)||void 0===o?void 0:o[rt];if(t&&!e.action){e.stopImmediatePropagation(),e.notification.close();var n=function(e){var t;var n=null!==(t=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==t?t:null===(n=e.notification)||void 0===n?void 0:n.click_action;if(n)return n;return function(e){return"object"==typeof e&&e&&st in e}(e.data)?self.location.origin:null}(t);if(n){var i,o=new URL(n,self.location.href),e=new URL(self.location.origin);if(o.host===e.host){let e=await async function(e){var t=await xt();for(const i of t){var n=new URL(i.url,self.location.href);if(e.host===n.host)return i}return null}(o);if(e?e=await e.focus():(e=await self.clients.openWindow(n),i=3e3,await new Promise(e=>{setTimeout(e,i)})),e)return t.messageType=N.NOTIFICATION_CLICKED,t.isFirebaseMessaging=!0,e.postMessage(t)}}}}function xt(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Nt(e){return it.create("missing-app-config-values",{valueName:e})}class Bt{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw Nt("App Configuration Object");if(!e.name)throw Nt("App Name");var{options:t}=e;for(const n of["projectId","apiKey","appId","messagingSenderId"])if(!t[n])throw Nt(n);return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function $t(e,t){return function(e,t){if(void 0!==self.document)throw it.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,()=>{e.onBackgroundMessageHandler=null}}(e=d(e),t)}Lt._registerComponent(new l("messaging-sw",e=>{!async function(){return await n()&&"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then(e=>{if(!e)throw it.create("unsupported-browser")}).catch(e=>{throw it.create("indexed-db-unsupported")});const t=new Bt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",e=>{e.waitUntil(Kt(e,t))}),self.addEventListener("pushsubscriptionchange",e=>{e.waitUntil(async function(e,t){var{newSubscription:e}=e;e?(e=await vt(t.firebaseDependencies),await jt(t),t.vapidKey=null!==(e=null===(e=null==e?void 0:e.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==e?e:ot,await Ot(t)):await jt(t)}(e,t))}),self.addEventListener("notificationclick",e=>{e.waitUntil(Mt(e))}),t},"PUBLIC"));class Ft{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return async function(e,t){return et(e=d(e),t)}(this._delegate,e)}async deleteToken(){return tt(this._delegate)}onMessage(e){return nt(this._delegate,e)}onBackgroundMessage(e){return $t(this._delegate,e)}}t.default.INTERNAL.registerComponent(new l("messaging-compat",e=>navigator?new Ft(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging").getImmediate()):new Ft(e.getProvider("app-compat").getImmediate(),e.getProvider("messaging-sw").getImmediate()),"PUBLIC")),t.default.registerVersion("@firebase/messaging-compat","0.1.0-2021720181311")}.apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-messaging-compat.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-messaging-compat.js.map
